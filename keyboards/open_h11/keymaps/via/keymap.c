#include QMK_KEYBOARD_H
#ifdef DEBUG
#include "print.h"
#endif

#ifdef OLED_ENABLE
#include "oled_driver.h"
#include "action_layer.h"
#include "progmem.h"
#endif
enum layer_names {
    DJMAX,
    DJMAX_CONFIG,
    RIFT_NECRODANCER,
    PROJECT_DIVA, 
    RHYTHM_DOCTOR,
    MUSE_DASH
    //Up to 14 layers, layer size changed in keyboard.json
};

 const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
   [DJMAX_CONFIG] = LAYOUT(
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS
  ),
   [DJMAX] = LAYOUT(
    KC_A, KC_B, KC_C, KC_D, TO(1), KC_F, KC_G, KC_H, KC_I, KC_J,
    KC_1, KC_2, KC_3, KC_4, KC_5, KC_6, KC_7, KC_8, KC_9, QK_BOOT,
    KC_V, KC_W, KC_X, KC_Y, KC_Z
  ),
   [RIFT_NECRODANCER] = LAYOUT(
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, TO(2), KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS
  ),
   [PROJECT_DIVA] = LAYOUT(
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, TO(3), KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS
  ),
   [RHYTHM_DOCTOR] = LAYOUT(
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, TO(4), KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS
  ),
   [MUSE_DASH] = LAYOUT(
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, TO(1), KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS,
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS
  ),

  
 
 
 };
 
#ifdef OLED_ENABLE

#define ANIM_SIZE 525 // number of bytes in array, minimize for adequate firmware size, max is 1024
static const char PROGMEM layer_status[][ANIM_SIZE] = {
    [DJMAX]={
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,252,248,248,240,240,240,248,248,252,252,252,248,248,240,240,248,248,252,124,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,254,252,252,252,252,220,156, 28, 28, 28, 28, 28, 28, 28,252,254,255,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,255,255,255,255,225,243,255,127, 63, 30, 62,120,248,240,224,255,255,255,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 31, 31, 15,  7,  3,  1,  0,  0,  0,  0,  0,  0,  0,  1,  3,  7, 15, 31, 31,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
    },
    [DJMAX_CONFIG]=
    {
        0,  0,  0,252,248,248,240,240,240,248,248,252,252,252,248,240,240,240,248,248,252,124,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,192,192,192,192,128,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
        0,  0,  0,255,254,252,252,252,252,220,156, 28, 28, 28, 28, 28, 28, 28,252,254,255,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 48,124,254,252,252,252,127, 63, 31, 31, 31, 63,252,252,252,254,124, 56,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,255,255,255,255,225,243,255,127, 63, 30,124,120,248,240,224,255,255,255,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 28, 62,127,127, 63, 63,252,248,248,248,248,252,127, 63, 63,127, 62, 28,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0, 63, 31, 15,  7,  3,  1,  0,  0,  0,  0,  0,  0,  0,  1,  3,  7, 15, 31, 63,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  3,  3,  3,  3,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
    },
    [RIFT_NECRODANCER]={
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,224,224,240,120,120, 60, 60, 62, 62, 30, 30, 30, 30, 62, 62, 62,126,252,252,248,248,192,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,192,248,254, 63,207,243,241,224,  0,  0,128,240,248,252,252,252,252,120,  0,  0,  0,  0,  1,255,255,255,255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,135,255,255, 56,  0,131,199,  3,  0,  0,225,195,  7,  7,  3,243,248,248, 56, 56, 56, 60, 62, 63, 31, 15,  3,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 48, 56, 62, 63, 63, 28, 28, 30, 31, 31, 30, 30, 14, 15, 15, 15, 15, 15, 15,  7,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
    },
    //3 Project Dive
    [PROJECT_DIVA]= {
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,112,112,112,112,254,254,254,254,240,240,240,112,112,240,112,240,240,240,112,112,240,240,240,240,224,  0,  0,112,112,112,112,240,240,240,240,126,126,126,126,240,240,240,240,112,112,112,112,  0,  0,  0,224,240,240,240,240,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,192,224,240,248,248,124, 62, 63, 31,255,255,255,243,241,252,254,158, 31, 15,255,255,255,255,255,  0,255,255,255,255,255, 15, 15, 15, 15,255,255,255,255,255,127,127,127,127,127,127,127,255,255,239,239,207,143, 15,  7,  0, 15,207,207,207,207,207,207,207,207,207,207,207,207,207,207,207,207,207,207,207,207,143,  0,  0,248,248,124, 62, 31, 31, 15, 15, 15, 15, 15, 15, 15, 15, 15,143,207,255,255,255,255,126,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  7,  7,  3,  1,  0,  0,  0,  0,  0,  0,255,255,255,255,  3,  3,  7, 15,  0,  0,255,255,255,255,127,  0,127,255,255,255,255,  0,  0,  0,  0,255,255,255,255,255,247,247,247,247,247,247,247,114,125,127,127, 63, 31,  0,  0,  0,112,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,243,240,  0,  0,  0,  0,  0,  0,128,192,192,224,240,248,248,124, 62, 31, 31, 15,  7,  3,  3,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 63,223,255,255,248,248,124,126, 62, 31, 15,  7,  7,  3,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
    },
    // 4  Rhythm Doctor
    [RHYTHM_DOCTOR] = 
    {
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,192,192,192,224,224, 96, 96,112,112, 48, 48, 56,184,248,248,120, 24, 24, 24, 24, 24, 24, 24, 24, 56,240,240,224,  0,128,224,224, 96,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,224,224, 96,  0,128,128,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,192,224,240,224,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,128,192,192,128,  0,  0,  0,  1,  1,  0,  0,  0,  0,  0,128,192,240,120, 60, 15,103,243,240,176,184, 56, 24, 28, 12, 14, 14,135,231,243,249,222,239,231,243,240,176,128,192,224,240,248,248,128,192,192,238,254,126, 46,142,206,254,126, 63, 15,207,254,254,190,207,227,225, 64,  0,128,192,224,112, 56,156,254,255,255,227,112, 56, 28, 14,199,251,255, 63,  7,  0,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128, 
        7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  3,  1, 15,127,252,240,128,  0,  0,  0,224,248, 60, 30, 15,  3,  1,  0,  0,  0,  0,  0,  1,  3,  7, 15, 30, 60, 56, 30, 31, 15,  7,  3,  3,  1,  0, 15, 15,  7,195,195,193,  0,  3,199,243,251, 63, 15,  7,113,120, 62, 15,  7,  1,  8, 30, 31, 15,  7,  3,  3, 31, 63, 31, 14,  7,  3,  1,  0,  0,  0,  7,  7,  3,  1,  0,  0,  0, 96,126,127, 63, 29, 14,  7,  7,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3, 
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  7,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  7, 15, 15,  7,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
    },
    // 5 MUSE DASH
    [MUSE_DASH]= 
    {
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,128,128,192,192,192,239,255,255,255,255,255,255,255,255,255,255,255,255,254,252,192,  0,  0,248,254,254,255,255,255,255,255,255,255,255,255,255,255,254,254,254,254,254,  0,254,254,254,254,254,252,254,254,254,254,238,222,254,190,188, 24,252,254,254,254,254,254,222,222,222,222, 12,  0,  0,  0,  0,254,255,255,255,255,255,255,255,255,255,255,254,  0,  0,254,255,255,255,255,255,255,255,255,255,255,255,124, 56,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
        0,  0,  0,  0,  0,128,128,128,192,192,192,225,227,243,247,247,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,240,255,255,255,255,255,255,127,255,255,255,255,255,255,255,255,255,255,127,127,255,255,255,255,127,127,127, 31, 60,125,125,255,255,231,255,127,127,127, 63,127,127,255,255,255,251,123,123,123,112,  0,  0,  0,  0,255,255,255,255,255,255,255,255,255,255,255,255,248,248,255,255,255,255,255,255,255,255,255,255,255,255,246,247,  7,  6,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  7,  7, 15, 15, 15, 31, 31, 31, 63, 63, 63,127,255,255,255,255,255,255,255,255,255,255,255,255,255,  7, 15,255,255,255,255,255,255,255,255,255, 63,  3,  0,255,255,255,255,255,255,255,255,255,255,  0,  0,  0, 30,254,254,254,255,255,207,127,255,255,254,254,252,254,255,255,255,255,255,254,254,252,254,254,254,255,239,207,223,223,158,158,255,255,255,255,255,255,255,255,255,255,255,  7,  7,  7,255,255,255,255,255,255,255,255,255,255,255,255,  3,255,252,252,252,252,252,252,  0,  0,  0,  0,  0,  0,  0,  0, 
        0,  0,  0,  0,  0,  0,  0,224,240,240,248,252,254,255,255,255,255,255,255,255,255,255,255,255,255,255,127,  0,  0,  0, 15,127,255,255,255,127, 63,  3,  0,  0,  0,127,255,255,255,255,255,255,255,255,127,  0,  0,  0,  0, 63,255,255,255,255,255,240,255,255,255,127,255,255,127, 63, 28,127,255,255,255,255, 60,125,253,253,255,243,231,255,255,255,127,255,255,255,255,255,255,255,255,255,127,  0,  0,  0,127,255,255,255,255,255,255,255,255,255,255,255,255, 62,247,255,250,248,248,246,  6,192,192,192,  0,  0,  0,  0,
    }

};
  
void render_layer_status(void) {
    uint8_t layer_idx  = get_highest_layer(layer_state) ;
        if (layer_idx < sizeof(layer_status)) {
            oled_write_raw_P(layer_status[layer_idx], sizeof(layer_status[0]));
        } else { 
            oled_clear();
            oled_write_P(PSTR("\n      Layer: "), false);
            char layer_str[3] = {0};
            sprintf(layer_str,  "%d", layer_idx);
            oled_write_P(PSTR(layer_str), false);
        }
}

static uint8_t last_layer = 0;
bool oled_task_user(void) {
    uint8_t current_layer = biton32(layer_state);
    if (current_layer!= last_layer) {
        oled_on();
        last_layer = current_layer;
        render_layer_status();
        return true;
    }

    return false;

}
#endif